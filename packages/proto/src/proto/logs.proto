syntax = "proto3";
import "google/protobuf/empty.proto";
import "common.proto";

message LogBody {
    string timestamp = 1;
    string level = 2;
    string type = 3;
    string message = 4;
    string envId = 5;
}

message LogStreamBody {
    string timestamp = 1;
    string level = 2;
    string type = 3;
    string message = 4;
    string envId = 5;
    string logId = 6;
}

message IPutLogRequest {
    repeated LogBody logs = 1;
}


message StreamLogsRequest {
    User authUserData = 1;
    RequestMeta reqMeta = 2;
    string projectId = 3;
    string environmentId = 4;
}

message ExportLogsRequest {
    string deploymentId = 1;
    string projectId = 3;
    User authUserData = 4;
    RequestMeta reqMeta = 5;
}

message ExportLogsResponse {
    int32 code = 1;
    string message = 2;
    ExportLogsResponseData res = 3;
}

message ExportLogsResponseData {
    repeated string downloadURLs = 1;
}


service LogService {
    rpc IPutLog (IPutLogRequest) returns (google.protobuf.Empty);
    rpc StreamLogs (StreamLogsRequest) returns (stream LogStreamBody);
    rpc ExportLogs (ExportLogsRequest) returns (ExportLogsResponse);
}